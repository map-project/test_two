<!DOCTYPE html>
<html lang="en-US" xmlns="http://www.w3.org/1999/xhtml">
  <head profile="http://gmpg.org/xfn/11">
    <title>test 2</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <link rel="stylesheet" type="text/css" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" />
<script type='text/javascript' src='https://unpkg.com/leaflet@1.3.1/dist/leaflet.js'></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
    
    <link rel="stylesheet" href="css/leaflet.awesome-markers.css">
    <script src="js/leaflet.awesome-markers.js"></script>
 <body>
       	<div id="map" style=" 
       min-height: 500px;
-      	   min-width: 500px;
 			height: auto;
 			width: auto;
     border: 1px solid #AAA; "></div>
     <script>
var _data;  //data json
var i=0;    // iteration
var st;     // string
function loadJSON(file, callback) {
    var xobj = new XMLHttpRequest();
    xobj.overrideMimeType("application/json");
    xobj.open('GET', file, false); // Replace 'my_data' with the path to your file
    xobj.onreadystatechange = function () {
          if (xobj.readyState == 4 && xobj.status == "200") {
            // Required use of an anonymous callback as .open will NOT return a value but simply returns undefined in asynchronous mode
            callback(xobj.responseText);
          }
    };
    xobj.send(null);
 }
function load()
{
   loadJSON("metro.json", function(response)
   {
        //alert(response);
         _data = JSON.parse(response); //eval('(' +response+')')
     
          });
}
load();
</script>
            	<script>
       		var map = L.map( 'map', {
  center: [28, 77],
  minZoom: 0,
  zoom: 7
})
       		L.tileLayer( 'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',
  subdomains: ['a', 'b', 'c']
}).addTo( map )
     

                for(i=0;i<_data.length;i++)
{
  if((_data[i].details.line=="Blue Line")||(_data[i].details.line=="Blue Line branch"))
  {
  
  L.marker([_data[i].details.latitude, _data[i].details.longitude],
           {icon: L.AwesomeMarkers.icon({icon: 'spinner', prefix: 'fa', markerColor: 'blue', spin:true}) }).bindPopup(_data[i].name+ '<br>'+_data[i].details.line).addTo(map);
}
  else if(_data[i].details.line=="Green Line")
  {
  
  L.marker([_data[i].details.latitude, _data[i].details.longitude],
           {icon: L.AwesomeMarkers.icon({icon: 'spinner', prefix: 'fa', markerColor: 'green', spin:true}) }).bindPopup(_data[i].name+ '<br>'+_data[i].details.line).addTo(map);
}
    else if(_data[i].details.line=="Airport Expres")
  {
  
  L.marker([_data[i].details.latitude, _data[i].details.longitude],
           {icon: L.AwesomeMarkers.icon({icon: 'spinner', prefix: 'fa', markerColor: 'orange', spin:true}) }).bindPopup(_data[i].name+ '<br>'+_data[i].details.line).addTo(map);
}
      else if(_data[i].details.line=="Red Line")
  {
  
  L.marker([_data[i].details.latitude, _data[i].details.longitude],
           {icon: L.AwesomeMarkers.icon({icon: 'spinner', prefix: 'fa', markerColor: 'red', spin:true}) }).bindPopup(_data[i].name+ '<br>'+_data[i].details.line).addTo(map);
}
  else
  {}
}

      
//  L.marker([28.941196,77.512291],{icon: L.AwesomeMarkers.icon({icon: 'spinner', prefix: 'fa', markerColor: 'red', spin:true}) }).addTo(map);        

 </script>

       </body>
   </head>
</html>         
